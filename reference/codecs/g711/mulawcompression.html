<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<head>
	<title>Hazelware</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<LINK REL="SHORTCUT ICON" HREF="logo.ico">
</head>



<body vlink='#3173EB' link='#3173EB' leftmargin=0 topmargin=0 marginwidth=0 marginheight=0>

<meta name="ICBM" content="45.30027, -122.9719" />
<meta name="keywords" content="Palm PalmOS WinCE PocketPC PDA Development Wireless" />
<meta name="description" content="Postings from a wireless PDA developer." />
<link rel="alternate" type="application/rss+xml" title="RSS" href="http://threejacks.com/~jon/rss.xml" />
<style type="text/css">
<!--
A		{text-decoration:none}
a		{text-decoration:none}
A:hover 	{ color: #000000;  }
a:hover 	{ color: #000000;  }
-->
</style>
<table><tr><td valign=top>
		<TABLE border=1 cellspacing=0 cellpadding=5 width=100% align=center valign=top bordercolor='#000000'><TR><TD bgcolor='#B5D0FF'><B>Archive:</B></TD></TR><TR><TD bgcolor='#ffffff'><A HREF='http://threejacks.com/~jon/archive.html?2010.1'>January - 2010</A><br><A HREF='http://threejacks.com/~jon/archive.html?2009.11'>November - 2009</A><br><A HREF='http://threejacks.com/~jon/archive.html?2009.10'>October - 2009</A><br><A HREF='http://threejacks.com/~jon/archive.html?2009.9'>September - 2009</A><br><A HREF='http://threejacks.com/~jon/archive.html?2009.8'>August - 2009</A><br><A HREF='http://threejacks.com/~jon/archive.html?2009.7'>July - 2009</A><br><A HREF='http://threejacks.com/~jon/archive.html?2009.6'>June - 2009</A><br><A HREF='http://threejacks.com/~jon/archive.html?2009.4'>April - 2009</A><br><A HREF='http://threejacks.com/~jon/archive.html?2009.3'>March - 2009</A><br><A HREF='http://threejacks.com/~jon/archive.html?2009.1'>January - 2009</A><br><A HREF='http://threejacks.com/~jon/archive.html?2008.5'>May - 2008</A><br><A HREF='http://threejacks.com/~jon/archive.html?2008.4'>April - 2008</A><br><A HREF='http://threejacks.com/~jon/archive.html?2008.3'>March - 2008</A><br><A HREF='http://threejacks.com/~jon/archive.html?2007.10'>October - 2007</A><br><A HREF='http://threejacks.com/~jon/archive.html?2007.8'>August - 2007</A><br><A HREF='http://threejacks.com/~jon/archive.html?2007.7'>July - 2007</A><br><A HREF='http://threejacks.com/~jon/archive.html?2007.6'>June - 2007</A><br><A HREF='http://threejacks.com/~jon/archive.html?2007.5'>May - 2007</A><br><A HREF='http://threejacks.com/~jon/archive.html?2007.4'>April - 2007</A><br><A HREF='http://threejacks.com/~jon/archive.html?2006.12'>December - 2006</A><br><A HREF='http://threejacks.com/~jon/archive.html?2006.11'>November - 2006</A><br><A HREF='http://threejacks.com/~jon/archive.html?2006.9'>September - 2006</A><br><A HREF='http://threejacks.com/~jon/archive.html?2006.8'>August - 2006</A><br><A HREF='http://threejacks.com/~jon/archive.html?2006.7'>July - 2006</A><br><A HREF='http://threejacks.com/~jon/archive.html?2006.3'>March - 2006</A><br><A HREF='http://threejacks.com/~jon/archive.html?2006.2'>February - 2006</A><br><A HREF='http://threejacks.com/~jon/archive.html?2006.1'>January - 2006</A><br><A HREF='http://threejacks.com/~jon/archive.html?2005.12'>December - 2005</A><br><A HREF='http://threejacks.com/~jon/archive.html?2005.11'>November - 2005</A><br><A HREF='http://threejacks.com/~jon/archive.html?2005.10'>October - 2005</A><br><A HREF='http://threejacks.com/~jon/archive.html?2005.9'>September - 2005</A><br><A HREF='http://threejacks.com/~jon/archive.html?2005.8'>August - 2005</A><br><A HREF='http://threejacks.com/~jon/archive.html?2005.7'>July - 2005</A><br><A HREF='http://threejacks.com/~jon/archive.html?2005.6'>June - 2005</A><br><A HREF='http://threejacks.com/~jon/archive.html?2005.5'>May - 2005</A><br><A HREF='http://threejacks.com/~jon/archive.html?2005.4'>April - 2005</A><br><A HREF='http://threejacks.com/~jon/archive.html?2005.2'>February - 2005</A><br><A HREF='http://threejacks.com/~jon/archive.html?2005.1'>January - 2005</A><br><A HREF='http://threejacks.com/~jon/archive.html?2004.12'>December - 2004</A><br><A HREF='http://threejacks.com/~jon/archive.html?2004.11'>November - 2004</A><br><A HREF='http://threejacks.com/~jon/archive.html?2004.10'>October - 2004</A><br><A HREF='http://threejacks.com/~jon/archive.html?2004.9'>September - 2004</A><br><A HREF='http://threejacks.com/~jon/archive.html?2004.8'>August - 2004</A><br><A HREF='http://threejacks.com/~jon/archive.html?2004.7'>July - 2004</A><br><A HREF='http://threejacks.com/~jon/archive.html?2004.6'>June - 2004</A><br><A HREF='http://threejacks.com/~jon/archive.html?2004.5'>May - 2004</A><br><A HREF='http://threejacks.com/~jon/archive.html?2004.4'>April - 2004</A><br><A HREF='http://threejacks.com/~jon/archive.html?2004.3'>March - 2004</A><br></TD></TR></TABLE></small>
</td>
<td valign=top>

<TABLE border=1 bordercolor='#000000' cellspacing=0 cellpadding=0>
<TR><TD>
		<TABLE bgcolor='#B5D0FF' width = 600><TR>
			<TD height = 50>
				<BIG><BIG><B>&nbsp &nbsp &nbsp &nbsp Mu-Law and A-Law Compression Tutorial</B></BIG></BIG>
			</TD>
		</TR></TABLE>

</TD></TR><TR><TD>

		<TABLE bgcolor='#ffffff' width = 600 cellspacing=15><TR>
			<TD width=100%>
				<BR>
				<BR>
				<FONT SIZE="3" FACE="Arial, Helvetica, sans-serif"><B>Overview:</B></FONT>
				What are A-Law and Mu-Law compression?  In the simplest terms, they are 
				standard forms of audio compression for 16 bit sounds.  Like most audio 
				compression techniques, they are lossy, which means that when you expand them
				back from their compressed state, they will not be exactly the same as
				when you compressed them.  The compression is always 2:1, meaning that 
				audio compressed with either of these algorithms will always be exactly half
				of their original size.
				<BR>
				Mu-Law and A-Law compression are both logarithmic forms of data compression,
				and are extremely similar, as you will see in a minute.  One definition of Mu-Law is 
				<BR><I>
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"...a form of logarithmic data compression
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for audio data.  Due to the fact that we hear logarithmically, 
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sound recorded at higher levels does not require the same 
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolution as low-level sound.  This allows us to disregard
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the least significant bits in  high-level data.  This turns  
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out to resemble a logarithmic transformation.  The resulting
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compression forces a 16-bit number to be represented as an 8-bit 
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number." </I>
				<A HREF = "http://www-s.ti.com/sc/psheets/spra267/spra267.pdf">
				(www-s.ti.com/sc/psheets/spra267/spra267.pdf)
				</A>
				<BR>
				<BR>And from the comp.dsp newsgroup FAQ we also get this definition:
				<BR><I>
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mu-law (also "u-law") encoding is a form of logarithmic
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quantization or companding. It's based on the observation that
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;many signals are statistically more likely to be near a low
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal level than a high signal level. Therefore, it makes
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;more sense to have more quantization points near a low level
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;than a high level. In a typical mu-law system, linear samples
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of 14 to 16 bits are companded to 8 bits. Most telephone
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quality codecs (including the Sparcstation's audio codec) use
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mu-law encoded samples.
				<BR></I>          
				<BR>In simpler terms, this means that sound is represented as a wave, and humans
				can only hear audio in the middle of the wave.  We can remove data from the upper
				and lower frequencies of a sound, and humans will not be able to hear a significant
				difference.  Both Mu-Law and A-Law take advantage of this, and are able to
				compress 16-bit audio in an manner acceptable to human ears.
				A-Law and Mu-Law compression appear to have been developed at around the
				same time, and basically only differ by the particular logarithmic function
				used to determine the translation.  When we get to the work of
				implementing the algorithms, you will see that the differences are nominal.
				The main difference is that Mu-Law attempts to keep the top five bits of precision, 
				and uses a logarithmic function to determine the bottom three bits, while A-Law
				compression keeps the top four bits and uses the logarithmic function to figure out
				the bottom four.  Both of these algorithms are used as telecommunication standards,
				A-Law being used mainly in Europe, and Mu-Law being used in the United States.
				<BR>
				<BR><B><I>DISCLAIMER:</I></B>
				<BR>Please understand that I am glossing over several of the details, but recognize that 
				the entire purpose of this document is to make two extremely useful algorithms much 
				more accessable to "average" programmers, like myself.
				<BR>
				<BR>
				<BR><FONT SIZE="3" FACE="Arial, Helvetica, sans-serif"><B>Mu-Law Compression:</B></FONT>
				<BR>As you read this explanation, remember that the purpose of the algorithm is to
				compress a 16-bit source sample down to an 8-bit sample.  The crux of Mu-Law
				functionality is deciding which of the samples need to keep the most of their
				precision.  Even the "most-important" sample will still lose precision.  It
				simply becomes a matter of determining how much each sample loses, and minimizing
				the loss on samples deemed "more important".  
				<BR>To generate a compressed Mu-Law sample from an uncompressed sample, the following
				algorithm is applied to the 16-bit source sample.  
				<BR><I>(Please refer to the code listing for Mu-Law compression.)</I>
				<BR>
				<BR>First, the algorithm first stores off the sign.  It then adds in a bias value 
				which (due to wrapping) will cause high valued samples to lose precision.
				The top five most significant bits are pulled out of the sample (which has 
				been previously biased).  Then, the bottom three bits of the compressed byte are 
				generated using a small look-up table, based on the biased value of the source sample.  
				The 8-bit compressed sample is then finally created by logically OR'ing together 
				the 5 most important bits, the 3 lower bits, and the sign when applicable.  The bits 
				are the logically NOT'ed, which I assume is for transmission reasons (although you 
				might not transmit your sample.)
				<BR>
				<BR>
				<BR><B>MuLaw Compresion Code:</B>
				<BR>
				<FONT SIZE="1" FACE="Courier, Helvetica, sans-serif">
				<BR>const int cBias = 0x84;
				<BR>const int cClip = 32635;
				<BR>
				<BR>static char MuLawCompressTable[256] = 
				<BR>{
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
				<BR>};
				<BR>
				<BR>unsigned char LinearToMuLawSample(short sample)
				<BR>{
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int sign = (sample >> 8) & 0x80;	
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (sign)
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sample = (short)-sample;
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (sample > cClip)
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sample = cClip;
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sample = (short)(sample + cBias);
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int exponent = (int)MuLawCompressTable[(sample>>7) & 0xFF];
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int mantissa = (sample >> (exponent+3)) & 0x0F;
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int compressedByte = ~ (sign | (exponent << 4) | mantissa);
				<BR>	
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return (unsigned char)compressedByte;
				<BR>}
				<BR></FONT>
				<BR>
				<BR>
				<BR>
				<BR><FONT SIZE="3" FACE="Arial, Helvetica, sans-serif"><B>A-Law Compression:</B></FONT>
				<BR>
				<BR>As mentioned earlier, A-Law compression is extremely similar to Mu-Law compression.  As you
				will see, they differ primarily in the way that they keep precision.  The 
				following is a short synopsis of the encoding algorithm, and the code example follows the
				written explanation.
				First, the sign is stored off.  Then the code branches.  If the absolute value of the source
				sample is less than 256, the 16-bit sample is simply shifted down 4 bits and converted 
				to an 8-bit value, thus losing the top 4 bits in the process.  
				However, if it is more than 256, a logarithmic algorithm is applied to the sample to 
				determine the precision to keep.  In that case, the sample is shifted down to access the
				seven most significant bits of the sample.  Those seven bits are then used to determine the
				precision of the bottom 4 bits.  Finally, the top seven bits are shifted back up four bits
				to make room for the bottom 4 bits.  The two are then logically OR'd together to create the
				eight bit compressed sample.  The sign is then applied, and the entire compressed sample
				is logically XOR'd, again, I assume for transmission reasons.
				<BR>
				<BR>
				<BR><B>A-Law Compression Code:</B>
				<BR>
				<FONT SIZE="1" FACE="Courier, Helvetica, sans-serif">
				<BR><color=#0000FF>static</color> char ALawCompressTable[128] = 
				<BR>{
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,1,2,2,3,3,3,3,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4,4,4,4,4,4,4,4,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5,5,5,5,5,5,5,5,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5,5,5,5,5,5,5,5,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6,6,6,6,6,6,6,6,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6,6,6,6,6,6,6,6,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6,6,6,6,6,6,6,6,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6,6,6,6,6,6,6,6,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7,7,7,7,7,7,7,7
				<BR>};
				<BR>
				<BR>unsigned char LinearToALawSample(short sample)
				<BR>{
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int sign;
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int exponent;
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int mantissa;
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unsigned char compressedByte;
				<BR>
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sign = ((~sample) >> 8) & 0x80;
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!sign) 
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sample = (short)-sample;
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (sample > cClip)
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sample = cClip;
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (sample >= 256)
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exponent = (int)ALawCompressTable[(sample >> 8) & 0x7F];
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mantissa = (sample >> (exponent + 3) ) & 0x0F;
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compressedByte = ((exponent << 4) | mantissa);
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else 
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compressedByte = (unsigned char)(sample >> 4);
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compressedByte ^= (sign ^ 0x55);
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return compressedByte;
				<BR>}
				<BR></FONT>
				<BR>
				<BR>
				<BR><FONT SIZE="3" FACE="Arial, Helvetica, sans-serif"><B>Decompression:</B></FONT>
				<BR>Now, the most obvious way to decompress a compressed Mu-Law or A-Law sample would 
				be to reverse the algorithm.  But a more efficient method exists.  Consider for a moment the 
				fact that A-Law and Mu-Law both take a 16-bit value and crunch it down to an 8-bit value.  
				The reverse of that is to take an 8-bit value and turn it into a sixteen bit value.  In the 
				graphics world, it is extremely common to represent 32 and 24 bit values with an eight bit 
				index into a palette table.  So, why not take a page from the world of graphics and use 
				palettes for the Mu-Law and A-Law compression look up?  Sounds good to me.  In fact, 
				these palettes will be smaller than their 24 and 32 bit cousins because we only need to 
				represent 16 bit values, not 24 and 32.  In a nutshell, we will create static lookup 
				tables to do the reverse conversion from A-Law and Mu-Law.  The two differing tables 
				are presented below.  To convert from your compressed sample back to the raw 16-bit 
				sample, just use your compressed sample as the index into the table, and the corresponding 
				value in the table is your decompressed 16-bit sample.  Obviously, the downside is that 
				this method requires the memory overhead for the tables, but each table is only 512 bytes.  
				In this day and age, that's downright cheap for the absolute fastest decompression!
				<BR>
				<BR>
				<BR><B>Decompression Code:</B>
				<BR><FONT SIZE="1" FACE="Courier, Helvetica, sans-serif">
				<BR>static short MuLawDecompressTable[256] = 
				<BR>{        
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-32124,-31100,-30076,-29052,-28028,-27004,-25980,-24956,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-23932,-22908,-21884,-20860,-19836,-18812,-17788,-16764,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-15996,-15484,-14972,-14460,-13948,-13436,-12924,-12412,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-11900,-11388,-10876,-10364, -9852, -9340, -8828, -8316,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-7932, -7676, -7420, -7164, -6908, -6652, -6396, -6140,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-5884, -5628, -5372, -5116, -4860, -4604, -4348, -4092,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-3900, -3772, -3644, -3516, -3388, -3260, -3132, -3004,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-2876, -2748, -2620, -2492, -2364, -2236, -2108, -1980,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-1884, -1820, -1756, -1692, -1628, -1564, -1500, -1436,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-1372, -1308, -1244, -1180, -1116, -1052,  &nbsp;-988,  &nbsp;-924,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-876, &nbsp;-844, &nbsp;-812, &nbsp;-780, &nbsp;-748, &nbsp;-716, &nbsp;-684, &nbsp;-652,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-620, &nbsp;-588, &nbsp;-556, &nbsp;-524, &nbsp;-492, &nbsp;-460, &nbsp;-428, &nbsp;-396,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-372, &nbsp;-356, &nbsp;-340, &nbsp;-324, &nbsp;-308, &nbsp;-292, &nbsp;-276, &nbsp;-260,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-244, &nbsp;-228, &nbsp;-212, &nbsp;-196, &nbsp;-180, &nbsp;-164, &nbsp;-148, &nbsp;-132,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-120, &nbsp;-112, &nbsp;-104, &nbsp;&nbsp;-96, &nbsp;&nbsp;-88, &nbsp;&nbsp;-80, &nbsp;&nbsp;-72, &nbsp;&nbsp;-64,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-56, &nbsp;&nbsp;-48, &nbsp;&nbsp;-40, &nbsp;&nbsp;-32, &nbsp;&nbsp;-24, &nbsp;&nbsp;-16, &nbsp;&nbsp;&nbsp;-8, &nbsp;&nbsp;&nbsp;&nbsp;-1,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;32124, 31100, 30076, 29052, 28028, 27004, 25980, 24956,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;23932, 22908, 21884, 20860, 19836, 18812, 17788, 16764,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15996, 15484, 14972, 14460, 13948, 13436, 12924, 12412,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11900, 11388, 10876, 10364, &nbsp;9852, &nbsp;9340, &nbsp;8828, &nbsp;8316,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7932, &nbsp;7676, &nbsp;7420, &nbsp;7164, &nbsp;6908, &nbsp;6652, &nbsp;6396, &nbsp;6140,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5884, &nbsp;5628, &nbsp;5372, &nbsp;5116, &nbsp;4860, &nbsp;4604, &nbsp;4348, &nbsp;4092,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3900, &nbsp;3772, &nbsp;3644, &nbsp;3516, &nbsp;3388, &nbsp;3260, &nbsp;3132, &nbsp;3004,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2876, &nbsp;2748, &nbsp;2620, &nbsp;2492, &nbsp;2364, &nbsp;2236, &nbsp;2108, &nbsp;1980,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1884, &nbsp;1820, &nbsp;1756, &nbsp;1692, &nbsp;1628, &nbsp;1564, &nbsp;1500, &nbsp;1436,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1372, &nbsp;1308, &nbsp;1244, &nbsp;1180, &nbsp;1116, &nbsp;1052, &nbsp;&nbsp;988, &nbsp;&nbsp;924,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;876, &nbsp;&nbsp;844, &nbsp;&nbsp;812, &nbsp;&nbsp;780, &nbsp;&nbsp;748, &nbsp;&nbsp;716, &nbsp;&nbsp;684, &nbsp;&nbsp;652,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;620, &nbsp;&nbsp;588, &nbsp;&nbsp;556, &nbsp;&nbsp;524, &nbsp;&nbsp;492, &nbsp;&nbsp;460, &nbsp;&nbsp;428, &nbsp;&nbsp;396,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;372, &nbsp;&nbsp;356, &nbsp;&nbsp;340, &nbsp;&nbsp;324, &nbsp;&nbsp;308, &nbsp;&nbsp;292, &nbsp;&nbsp;276, &nbsp;&nbsp;260,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;244, &nbsp;&nbsp;228, &nbsp;&nbsp;212, &nbsp;&nbsp;196, &nbsp;&nbsp;180, &nbsp;&nbsp;164, &nbsp;&nbsp;148, &nbsp;&nbsp;132,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;120, &nbsp;&nbsp;112, &nbsp;&nbsp;104, &nbsp;&nbsp;&nbsp;96, &nbsp;&nbsp;&nbsp;88, &nbsp;&nbsp;&nbsp;80, &nbsp;&nbsp;&nbsp;72, &nbsp;&nbsp;&nbsp;64,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;56, &nbsp;&nbsp;&nbsp;48, &nbsp;&nbsp;&nbsp;40, &nbsp;&nbsp;&nbsp;32, &nbsp;&nbsp;&nbsp;24, &nbsp;&nbsp;&nbsp;16, &nbsp;&nbsp;&nbsp;&nbsp;8, &nbsp;&nbsp;&nbsp;&nbsp;0
				<BR>};
				<BR>
				<BR>
				</FONT>
				<BR>
				<BR><FONT SIZE="1" FACE="Courier, Helvetica, sans-serif">
				<BR>static short ALawDecompressTable[256] = 
				<BR>{
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-5504, -5248, -6016, -5760, -4480, -4224, -4992, -4736,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-7552, -7296, -8064, -7808, -6528, -6272, -7040, -6784,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-2752, -2624, -3008, -2880, -2240, -2112, -2496, -2368,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-3776, -3648, -4032, -3904, -3264, -3136, -3520, -3392,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-22016,-20992,-24064,-23040,-17920,-16896,-19968,-18944,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-30208,-29184,-32256,-31232,-26112,-25088,-28160,-27136,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-11008,-10496,-12032,-11520,-8960, -8448, -9984, -9472,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-15104,-14592,-16128,-15616,-13056,-12544,-14080,-13568,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-344,  &nbsp;-328,  &nbsp;-376,  &nbsp;-360,  &nbsp;-280,  &nbsp;-264,  &nbsp;-312,  &nbsp;-296,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-472,  &nbsp;-456,  &nbsp;-504,  &nbsp;-488,  &nbsp;-408,  &nbsp;-392,  &nbsp;-440,  &nbsp;-424,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-88,   &nbsp;&nbsp;-72,  &nbsp; -120,  &nbsp;-104,   &nbsp;-24,    &nbsp;&nbsp;-8,   &nbsp;&nbsp; -56,   &nbsp;&nbsp;-40,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-216,  &nbsp;-200,  &nbsp;-248,  &nbsp;-232,  &nbsp;-152,  &nbsp;-136,  &nbsp;-184,  &nbsp;-168,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-1376, -1312, -1504, -1440, -1120, -1056, -1248, -1184,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-1888, -1824, -2016, -1952, -1632, -1568, -1760, -1696,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-688,  &nbsp;-656,  &nbsp;-752,  &nbsp;-720,  &nbsp;-560,  &nbsp;-528,  &nbsp;-624,  &nbsp;-592,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-944,  &nbsp;-912, &nbsp;-1008,  -976,  &nbsp;-816,  &nbsp;-784,  &nbsp;-880,  &nbsp;-848,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5504,  &nbsp;5248,  &nbsp;6016,  &nbsp;5760,  &nbsp;4480,  &nbsp;4224,  &nbsp;4992,  &nbsp;4736,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7552,  &nbsp;7296,  &nbsp;8064,  &nbsp;7808,  &nbsp;6528,  &nbsp;6272,  &nbsp;7040,  &nbsp;6784,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2752,  &nbsp;2624,  &nbsp;3008,  &nbsp;2880,  &nbsp;2240,  &nbsp;2112,  &nbsp;2496,  &nbsp;2368,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3776,  &nbsp;3648,  &nbsp;4032,  &nbsp;3904,  &nbsp;3264,  &nbsp;3136,  &nbsp;3520,  &nbsp;3392,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;22016, 20992, 24064, 23040, 17920, 16896, 19968, 18944,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;30208, 29184, 32256, 31232, 26112, 25088, 28160, 27136,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;11008, 10496, 12032, 11520,  8960,  &nbsp;8448,  &nbsp;9984,  &nbsp;9472,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15104, 14592, 16128, 15616, 13056, 12544, 14080, 13568,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;344, &nbsp;&nbsp;328, &nbsp;&nbsp;376, &nbsp;&nbsp;360, &nbsp;&nbsp;280, &nbsp;&nbsp;264, &nbsp;&nbsp;312, &nbsp;&nbsp;296,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;472, &nbsp;&nbsp;456, &nbsp;&nbsp;504, &nbsp;&nbsp;488, &nbsp;&nbsp;408, &nbsp;&nbsp;392, &nbsp;&nbsp;440, &nbsp;&nbsp;424,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;88, &nbsp;&nbsp;&nbsp;72, &nbsp;&nbsp;120, &nbsp;&nbsp;104, &nbsp;&nbsp;&nbsp;24, &nbsp;&nbsp;&nbsp;&nbsp;8, &nbsp;&nbsp;&nbsp;56, &nbsp;&nbsp;&nbsp;40,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;216, &nbsp;&nbsp;200, &nbsp;&nbsp;248, &nbsp;&nbsp;232, &nbsp;&nbsp;152, &nbsp;&nbsp;136, &nbsp;&nbsp;184, &nbsp;&nbsp;168,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1376, &nbsp;1312, &nbsp;1504, &nbsp;1440, &nbsp;1120, &nbsp;1056, &nbsp;1248, &nbsp;1184,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1888, &nbsp;1824, &nbsp;2016, &nbsp;1952, &nbsp;1632, &nbsp;1568, &nbsp;1760, &nbsp;1696,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;688, &nbsp;&nbsp;656, &nbsp;&nbsp;752, &nbsp;&nbsp;720, &nbsp;&nbsp;560, &nbsp;&nbsp;528, &nbsp;&nbsp;624, &nbsp;&nbsp;592,
				<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;944, &nbsp;&nbsp;912, &nbsp;1008, &nbsp;&nbsp;976, &nbsp;&nbsp;816, &nbsp;&nbsp;784, &nbsp;&nbsp;880, &nbsp;&nbsp;848
				<BR>};
				<BR></FONT>
				<BR>
				<BR>
			</TD>
			<TD width=25>
			</TD>
		</TR></TABLE>
</TD></TR></TABLE>
</td></tr></table>
</body>
</html>

